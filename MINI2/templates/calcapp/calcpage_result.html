{% extends 'mainpage/mainpage.html' %}
{% block content %}

<!-- css/js -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css">
<script src="https://code.jquery.com/jquery-2.2.4.js"></script>
<script src="/static/progressbar.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/waypoints/2.0.3/waypoints.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Counter-Up/1.0.0/jquery.counterup.min.js"></script>

<script>

    $(document).ready(function(){
        var $pline = $('.progressbar.line');
        var $pcircle = $('.progressbar.circle');
        $pline.each(function(i){
            var line = new ProgressBar.Line(this, {
                strokeWidth:6,
                trailWidth:6,
                duration:3000,
                easing:'easeInOut',
                text:{
                    style:{
                        color:'inherit',
                        position:'absolute',
                        right:'0',
                        top:'-30px',
                        padding:0,
                        margin:0,
                        transform: null
                    },
                    autoStyleContainer: false
                },
                step: function(state, line, attachment){
                    line.setText(Math.round(line.value()*100)+'%');
                }
            });
            var value = ($(this).attr('data-value')/100);
            $pline.waypoint(function(){
                line.animate(value);
            }, {
                offset: '100%'
            })
        });

        $pcircle.each(function(i){
            var circle = new ProgressBar.SemiCircle(this,{
                strokeWidth:9,
                trailWidth:5,
                duration:2000,
                easing: 'easeInOut',
                step: function(state, circle, attachment){
                    circle.setText(Math.round(circle.value()*100));
                }
            });

            var value = ($(this).attr('data-value')/100);
            $pcircle.waypoint(function(){
                circle.animate(value);
            },{
                offset: "100%"
            })
        });
    });

</script>

<style>
    :root{
        --color-red:#d75959;
        --color-yellow: #f5c463;
        --color-green: #9ccd7e;
        --color-blue: #5ca7db;
        --rgb-black:0,0,0;
    }

    /* .wrapper{
        margin-top: 150px;
    }   */

    .progressbar:not(.circle) svg,
    .progressbar:not(.circle) svg path{
        border-radius: 20px;
    }

    .progressbar svg path:first-child{
        stroke: rgba(var(--rgb-black), 0.09);
    }

    .progressbar.border{
        border: 1px solid transparent;
        box-sizing: border-box;
    }

    .progressbar.border svg path:first-child{
        stroke: transparent;
    }

    .progressbar.line svg{
        height: 10px;
    }

    .progressbar.line.border svg{
        height: 8px;
    }

    .progressbar.circle{
        position: relative;
        margin: 0 auto 30px;
        width: 170px;
        height: 85px;
    }

    .progressbar.circle .progressbar-text{
        position: absolute;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
        margin: 0;
        font-size: 40px;
        display: flex;
        align-items: flex-end;
        justify-content: center;
        color: white !important;
        font-weight: bold;
    }

    .progressbar.circle .progressbar-text:after{
        content: "%";
        display: block;
        font-size: 20px;
        padding-left: 2px;
    }

    .progressbar .red svg path:last-child{
        stroke: var(--color-red)
    }

    .progressbar .red svg path:last-child{
        stroke: var(--color-blue)
    }

    .progressbar .red svg path:last-child{
        stroke: var(--color-green)
    }

    .progressbar .red svg path:last-child{
        stroke: var(--color-yellow)
    }

h5{

}
</style>

{% include 'calcapp/calcpage_common.html' %}

<!-- Breadcrumb Section Begin -->
<section class="breadcrumb-option spad set-bg" data-setbg="/static/img/breadcrumb-bg.jpg">
    <div class="container">
        <div class="row">
            <div class="col-lg-12 text-center">
                <div class="breadcrumb__text">
                    <h2>마이페이지</h2>
                    <div class="breadcrumb__links">
                        <a href="{% url 'mainpage:mainhome' %}">Home</a>
                        <a href="{% url 'calcapp:calcpage_user' %}">내정보</a>
                        <span>계산기</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Breadcrumb Section End -->

<!-- 계산기, 유저정보 Start-->
<section class="pricing spad">
    <div class="container">
        <div class="row">
            <div class="col-6 col-md-4">
                <div class="card" style="width: 30rem;">
                    <div class="card-body">
                        <h3 class="card-title">교육 수당 계산기🧮</h3>
                        <h6 class="card-subtitle mb-2 text-muted">(출석일수 기준)</h6>
                        <p class="card-text">
                            Insert contents
                        </p>
                        <form action="calcpage" method="post">
                            {% csrf_token %}
                            하루 4시간 이상 20일 기준으로 출석일수를 입력하세요.<br><br>
                            <input type="text" name="num1" placeholder="ex) 19 or 20">
                            <input type="submit">
                        </form>
                    </div>
                </div>
            </div>
            <div class="col-6 col-md-4">
                <div class="card" style="width: 30rem;">
                    <div class="card-body">
                        <h3 class="card-title">지급 기준📌</h3>
                        <!-- <h6 class="card-subtitle mb-2 text-muted">subtitle</h6> -->
                        <p class="card-text">
                            !월 출석률이 하루 4시간 이상 80% 이상일 경우 교육수당 지급<br>
                            !교육수당 지급금액은 월 최대 300,000원<br>
                        </p>
                        <!-- <a href="#" class="card-link">Card link</a> -->
                        <!-- <a href="#" class="card-link">Another link</a> -->
                    </div>
                </div>
            </div>

            <div class="col-6 col-md-4">
                <div class="card" style="width: 30rem;">
                    <div class="col-xs-6 col-md-3">
                        {% if image %}
                        <img class="round" src="{{image.url}}" width="200"> <br>
                        {% else %}
                        <img class="round" src="https://i.stack.imgur.com/34AD2.jpg" width="200"> <br>
                        {% endif %}
                    </div>
                    <div class="card-body">
                        <h3 class="card-title">profile imeage</h3>
                        {% if nickname %}
                        <h6 class="card-subtitle mb-2 text-muted">{{nickname}}</h6>
                        {% endif %}
                        <!-- {% if user == profile_user %} 로그인한 사용자와 프로필 소유자가 일치할 때만 프로필 편집이 가능하도록 -->
                        <a href="#"><button type="button" class="btn btn-default">프로필 편집</button></a></h2>
                        <!-- {% endif %} -->
                        <p class="card-text">
                            username: {% if username %} {{username}} {% endif %}<br>
                            description: {% if description %} {{description}} {% endif %}<br>
                        </p>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <a href="#" class="card-link">프로필 수정</a>
                    </div>
                </div>
            </div>
        </div>
        <br>
        <div class="row">
            <div class="col-6 col-md-4">
                <div class="card" style="width: 30rem;">
                    <div class="card-body">
                        <h5 class="card-title">Card title</h5>
                        <h6 class="card-subtitle mb-2 text-muted">Card subtitle</h6>
                        <p class="card-text">Some quick example text to build on the card title and make up the bulk of
                            the card's content.</p>
                        <a href="#" class="card-link">Card link</a>
                        <a href="#" class="card-link">Another link</a>
                    </div>
                </div>
            </div>
            <div class="col-6 col-md-4">
                <div class="card" style="width: 30rem;">
                    <div class="card-body">
                        <h5 class="card-title">Card title</h5>
                        <h6 class="card-subtitle mb-2 text-muted">Card subtitle</h6>
                        <p class="card-text">Some quick example text to build on the card title and make up the bulk of
                            the card's content.</p>
                        <a href="#" class="card-link">Card link</a>
                        <a href="#" class="card-link">Another link</a>
                    </div>
                </div>
            </div>
            <div class="col-6 col-md-4">
                <div class="contact__widget">
                    <div class="contact__widget__icon">
                        <i class="fa fa-phone"></i>
                    </div>
                    <div class="contact__widget__text">
                        <h5>알림</h5>
                        <p>공지사항 확인하세요.</p>
                    </div>
                </div>
                <div class="contact__widget">
                    <div class="contact__widget__icon">
                        <i class="fa fa-envelope"></i>
                    </div>
                    <div class="contact__widget__text">
                        <h5>채팅</h5>
                        <p>채팅을 시작하세요.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- 계산기, 유저정보 End-->

<!-- 출석률 현황 graph Start -->
<div class="wrapper image-wrapper">
    <div class="container inner">
        <div class="row">
            <div class="col-md-10 offset-md-1">
                <h2 class="title-color text-center">Our Progress</h2>
                <div class="row text-center">
                    <div class="col-lg-3">
                        <div class="progressbar circle blue" data-value="75"></div>
                        <h5>attendance</h5>
                        <p>
                            ㅇㅇ
                        </p>
                    </div>

                    <div class="col-lg-3">
                        <div class="progressbar circle green" data-value="75"></div>
                        <h5>attendance</h5>
                        <p>
                            ㅇㅇ
                        </p>
                    </div>

                    <div class="col-lg-3">
                        <div class="progressbar circle red" data-value="75"></div>
                        <h5>attendance</h5>
                        <p>
                            ㅇㅇ
                        </p>
                    </div>

                    <div class="col-lg-3">
                        <div class="progressbar circle yellow" data-value="75"></div>
                        <h5>attendance</h5>
                        <p>
                            ㅇㅇ
                        </p>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>
<!-- 출석률 현황 graph End -->

<section class="pricing spad">
    <div class="container">
        <div class="card">
            <div class="card-body">
                graph
                <h3>🎓상세현황</h3>
                <table class="table">
                    <thead>
                        <tr>
                            <th scope="col">이름</th>
                            <th scope="col">출석일수</th>
                            <th scope="col">결석일수</th>
                            <th scope="col">출석시간</th>
                            <th scope="col">출석률</th>
                            <th scope="col">dat_rate</th>
                            <th scope="col">누적출석률</th>
                            <th scope="col">day_cum_rate</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for attendance in attnedances %}
                        <tr>
                            <th scope="row">{{attendance.name}}</th>
                            <td>{{attendance.attend}}</td>
                            <td>{{attendance.absent}}</td>
                            <td>{{attendance.time}}</td>
                            <td>{{attendance.time_rate}}%</td>
                            <td>{{attendance.day_rate}}%</td>
                            <td>{{attendance.time_cum_rate}}%</td>
                            <td>{{attendance.day_cum_rate}}%</td>
                        </tr>
                        {% endfor %}
                    <tbody>
                </table>

                <h3>🎓수료현황</h3>
                <!-- progress -->
                <div class="progress">
                    <div class="progress-bar bg-success" role="progressbar" style="width: 25%" aria-valuenow="25"
                        aria-valuemin="0" aria-valuemax="100"></div>
                </div>
                <!-- progress -->
                    {% for attendance in attnedances %}

                        {% if attendance.name == "김소희" %}
                        <span>
                            지금 까지 {{attendance.time}} / 960 시간 완료 했습니다.
                            <br>
                            {% if attendance.time < 800 %} 
                            {{attendance.time}} 수료 '불가' 합니다. 
                            {% elif attendance.time >= 800 %}
                            {{attendance.time}} 수료 '가능' 합니다.
                        </span>
                        {% endif %}
                        {% endif %}
                    {% endfor %}
            </div>
        </div>
    </div>
</section>

<!-- 버튼 -->
<!-- <button 
        type="button" 
        class="btn btn-primary" 
        data-toggle="popover" 
        data-placement="top" 
        title="지급 기준" 
        data-content="
        📌단위기간*출석률이 80% 이상일 경우에 한하여 교육수당 지급<br>
        📌교육수당 지급금액은 월 최대 300,000원<br>
        (단위기간: 교육 시작일을 기준으로 1개월 단위로 나눈 기간)">
        지급 기준
</button> -->
<!-- <script>
    $(function () {
        $('[data-toggle="popover"]').popover()
    });
</script> -->

{% endblock %}